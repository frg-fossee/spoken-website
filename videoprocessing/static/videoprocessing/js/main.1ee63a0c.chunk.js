(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{241:function(e,t,a){e.exports=a(491)},246:function(e,t,a){},247:function(e,t,a){},491:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),s=a(3),r=a.n(s),i=(a(246),a(74)),l=a(75),c=a(81),u=a(80),d=(a(247),a(204),a(124)),p=(a(161),a(92)),f=(a(163),a(236)),h=(a(164),a(41)),m=(a(492),a(237)),g=(a(59),a(11)),v=a(66),b=a.n(v),E=a(131),k=(a(166),a(128)),y=a(58),_=(a(167),a(65)),O=(a(160),a(45)),w=a(53),T=a.n(w),x=a(495),S=a(496),C=a(497),j=a(57),I=O.a.Option,D=_.a.Text,A=[{title:"FOSS",dataIndex:"foss",key:"foss",sorter:function(e,t){return e.foss.localeCompare(t.foss)},sortDirections:["descend","ascend"]},{title:"Tutorial Name",dataIndex:"tutorial",key:"tutorial",sorter:function(e,t){return e.tutorial.localeCompare(t.tutorial)},sortDirections:["descend","ascend"]},{title:"Language",dataIndex:"language",key:"language",sorter:function(e,t){return e.language.localeCompare(t.language)},sortDirections:["descend","ascend"]},{title:"Edit Video",dataIndex:"button",key:"button"}],L=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={tutorials:[],filteredTutorials:[],tutorialsInTable:[],searchFilteredTable:[],isLoading:!0,isTutDisabled:!0,fossDropdownOption:"All",tutorialDropdownOption:"All",searchBox:""},n.filterFosses=n.filterFosses.bind(Object(y.a)(n)),n.filterTutorials=n.filterTutorials.bind(Object(y.a)(n)),n.renderOptions=n.renderOptions.bind(Object(y.a)(n)),n.searchTable=n.searchTable.bind(Object(y.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(y.a)(n)),n}return Object(l.a)(a,[{key:"handleSubmit",value:function(e,t){var a=this;console.log(e,t);var n=new FormData;n.append("tutorial_detail",e),n.append("language",t),T.a.post("".concat("http://127.0.0.1:8000/videoprocessing/api","/process_tutorials"),n).then((function(e){console.log(e.data),a.props.history.push({pathname:"/dashboard",search:"id=".concat(e.data.id)})})).catch((function(e){k.a.error({message:"Error Occurred",description:e.response?"Status: ".concat(e.response.status," \n ").concat(e.response.statusText):"Some Error Occurred",onClick:function(){console.log("Notification Clicked!")}})}))}},{key:"filterFosses",value:function(){var e=Object(E.a)(b.a.mark((function e(t,a){var n,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),"All"!==t){e.next=7;break}n=this.state.tutorials,console.log(n),this.setState({fossDropdownOption:"All",filteredTutorials:n,isTutDisabled:!0,tutorialsInTable:n,tutorialDropdownOption:"All"}),e.next=13;break;case 7:return o=this.state.tutorials,e.next=10,o.filter((function(e){return e.foss===t}));case 10:o=e.sent,console.log(o),this.setState({fossDropdownOption:t,filteredTutorials:o,isTutDisabled:!1,tutorialsInTable:o});case 13:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"filterTutorials",value:function(){var e=Object(E.a)(b.a.mark((function e(t,a){var n,o,s=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("All"!==t){e.next=8;break}return n=this.state.filteredTutorials,e.next=4,n.filter((function(e){return e.foss===s.state.fossDropdownOption}));case 4:n=e.sent,this.setState({tutorialsInTable:n,tutorialDropdownOption:t}),e.next=14;break;case 8:return o=this.state.filteredTutorials,e.next=11,o.filter((function(e){return e.tutorial===t}));case 11:o=e.sent,console.log(o),this.setState({tutorialsInTable:o,tutorialDropdownOption:t});case 14:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"renderOptions",value:function(e){var t=new Set,a=[];return"foss"===e?this.state.tutorials.map((function(e){t.add(e.foss)})):this.state.filteredTutorials.map((function(e){t.add(e.tutorial)})),(t=Array.from(t)).map((function(e,t){a.push(o.a.createElement(I,{key:t,value:e},e))})),a}},{key:"searchTable",value:function(){var e=Object(E.a)(b.a.mark((function e(t){var a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target.value,n=this.state.tutorialsInTable,e.next=4,n.filter((function(e){var t=e.tutorial.toLowerCase().includes(a.toLowerCase()),n=e.foss.toLowerCase().includes(a.toLowerCase()),o=e.language.toLowerCase().includes(a.toLowerCase());return t||o||n}));case 4:n=e.sent,this.setState({searchFilteredTable:n,searchBox:a});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=this,t=[],a=new Set,n=new Set,s=new Set;T.a.get("".concat("http://127.0.0.1:8000/videoprocessing/api","/tutorials")).then((function(r){r.data.map((function(r){var i={};return i.key=r.tutorial_detail.id,i.foss=r.foss_category.name,i.tutorial=r.tutorial_detail.tutorial,i.language=r.language.name,i.isEdited=!1,i.tutorial_id=r.tutorial_detail.id,i.language_id=r.language.id,i.button=o.a.createElement(m.a,{onConfirm:function(){return e.handleSubmit(r.tutorial_detail.id,r.language.id)},title:"Are you sure?",okText:"Yes",cancelText:"No"},o.a.createElement(g.a,{size:"large",icon:o.a.createElement(x.a,null)},"Edit Video")),t.push(i),a.add(i.foss),n.add(i.tutorial),s.add(i.language),t}))})).then((function(){T.a.get("".concat("http://127.0.0.1:8000/videoprocessing/api","/process_tutorials")).then((function(e){e.data.map((function(e){console.log(e);for(var a=0;a<t.length;a++)t[a].tutorial_id===e.tutorial_detail&&t[a].language_id===e.language&&(t[a].isEdited=!0,t[a].button=o.a.createElement(g.a,{size:"large",icon:o.a.createElement(S.a,null)},"View"))}))})).then((function(){e.setState({tutorials:t,isLoading:!1,filteredTutorials:t,tutorialsInTable:t})}))}))}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(p.a,{xs:2,sm:4,md:6,lg:10,xl:10},o.a.createElement(h.a,{span:6,offset:1},o.a.createElement(D,{level:4},"FOSS \xa0 \xa0 \xa0"),o.a.createElement(O.a,{value:this.state.fossDropdownOption,size:"large",onChange:this.filterFosses,defaultValue:"All",style:{width:120}},o.a.createElement(I,{value:"All"},"All"),this.renderOptions("foss"))),o.a.createElement(h.a,{span:6},o.a.createElement(D,{level:3},"Tutorial  \xa0 \xa0 \xa0"),o.a.createElement(O.a,{value:this.state.tutorialDropdownOption,size:"large",disabled:this.state.isTutDisabled,style:{width:120},onChange:this.filterTutorials},o.a.createElement(I,{value:"All"},"All"),this.renderOptions("tutorials"))),o.a.createElement(h.a,{span:10},o.a.createElement(f.a,{allowClear:!0,size:"large",placeholder:"Search",prefix:o.a.createElement(C.a,null),onChange:this.searchTable})),o.a.createElement(h.a,{span:1})),o.a.createElement(d.a,{scroll:{y:"calc(100vh - 4em)"},loading:this.state.isLoading,dataSource:""!==this.state.searchBox?this.state.searchFilteredTable:this.state.tutorialsInTable,columns:A}))}}]),a}(o.a.Component),F=Object(j.f)(L),z=(a(450),a(234)),N=(a(199),a(125)),B=(a(453),a(233)),M=(a(159),a(122)),V=(a(455),a(157)),W=(a(457),a(235)),J=a(224),U=a.n(J),P=a(225),Q=a.n(P),R=a(226),X=a.n(R),Y=a(498),$=a(499),q=a(500),G=W.a.Dragger,H=_.a.Title,K=(_.a.Text,function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={loading:!0,id:"",current_count:"",chunks:[],status:"",checksum:"",foss:"",tutorial_name:"",language:"",total_count:"",processed_video:"",processed:!1,progress_status:"",visible:!1},n.config={name:"file",multiple:!0,action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",onChange:function(e){var t=e.file.status;"uploading"!==t&&console.log(e.file,e.fileList),"done"===t?V.a.success("".concat(e.file.name," file uploaded successfully.")):"error"===t&&V.a.error("".concat(e.file.name," file upload failed."))}},n.columns=[{title:"Chunk No.",dataIndex:"chunk_no",key:"chunk_no",width:"5%"},{title:"Audio",dataIndex:"audio_chunk",key:"audio_chunk",render:function(e){return o.a.createElement(Q.a,{src:e,controls:!0,controlsList:"nodownload"})}},{title:"Start Time",dataIndex:"start_time",key:"start_time"},{title:"End Time",dataIndex:"end_time",key:"end_time"},{title:"Subtitle",dataIndex:"subtitle",key:"subtitle",sorter:function(e,t){return e.subtitle.localeCompare(t.subtitle)},sortDirections:["descend","ascend"]},{title:"Change Audio",render:function(){return o.a.createElement(g.a,{icon:o.a.createElement(Y.a,null),onClick:n.showModal},"Change Audio")}}],n.showModal=function(){n.setState({visible:!0})},n.handleOk=function(e){console.log(e),n.setState({visible:!1})},n.handleCancel=function(e){console.log(e),n.setState({visible:!1})},n.fetchData=function(){n.setState({processed:!1}),n.apiLoop=setInterval((function(){T.a.get("".concat("http://127.0.0.1:8000/videoprocessing/api","/process_tutorials/").concat(n.state.id)).then((function(e){console.log(e.data),n.setState({current_count:e.data.chunks.length,chunks:e.data.chunks,total_count:e.data.video_data.total_chunks,tutorial_name:e.data.video_data.tutorial_name,language:e.data.video_data.language,foss:e.data.video_data.foss,status:e.data.video_data.status,checksum:e.data.video_data.checksum,loading:!1}),null===e.data.video_data.processed_video?n.setState({processed_video:e.data.video_data.video}):n.setState({processed_video:e.data.video_data.processed_video}),"done"===e.data.video_data.status&&(clearInterval(n.apiLoop),n.setState({processed:!0}))})).catch((function(e){k.a.error({message:"Error Occurred",description:e.response?"Status: ".concat(e.response.status," \n ").concat(e.response.statusText):"Some Error Occurred",onClick:function(){console.log("Notification Clicked!")}}),n.setState({status:"not found",progress_status:"exception"}),clearInterval(n.apiLoop)}))}),2e3)},n}return Object(l.a)(a,[{key:"componentWillMount",value:function(){var e=U.a.parse(this.props.location.search,{ignoreQueryPrefix:!0}).id;this.setState({id:e})}},{key:"componentDidMount",value:function(){this.fetchData()}},{key:"componentWillUnmount",value:function(){clearInterval(this.apiLoop)}},{key:"render",value:function(){var e=this.state.loading;return o.a.createElement("div",null,e?o.a.createElement(B.a,{size:"middle"},o.a.createElement(M.a,{size:"large"})):o.a.createElement("div",null,o.a.createElement(p.a,{align:"middle"},o.a.createElement(h.a,{span:4,style:{display:"inline-flex",justifyContent:"center",alignItems:"center"}},o.a.createElement(N.a,{type:"circle",percent:parseInt(this.state.current_count/this.state.total_count*100),status:this.state.progress_status})),o.a.createElement(h.a,{style:{display:"inline-flex",justifyContent:"center",alignItems:"center"},span:4},o.a.createElement(_.a,null,o.a.createElement(H,{level:4},"Status: ",this.state.status.toUpperCase()),o.a.createElement(H,null,o.a.createElement(g.a,{type:"primary",icon:o.a.createElement($.a,null),size:"large"},"Download Tutorial")))),o.a.createElement(h.a,{style:{display:"inline-flex",justifyContent:"center",alignItems:"center"},span:8},o.a.createElement(_.a,null,o.a.createElement(H,{level:3},this.state.tutorial_name),o.a.createElement(H,{level:4},this.state.foss))),o.a.createElement(h.a,{style:{display:"inline-flex",justifyContent:"center",alignItems:"center"},span:8},o.a.createElement(X.a,{height:200,url:this.state.processed_video,controls:!0}))),o.a.createElement(p.a,null,o.a.createElement(d.a,{loading:this.state.isLoading,dataSource:this.state.chunks,columns:this.columns})),o.a.createElement(z.a,{title:"Change Audio",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel},o.a.createElement(G,this.config,o.a.createElement("p",{className:"ant-upload-drag-icon"},o.a.createElement(q.a,null)),o.a.createElement("p",{className:"ant-upload-text"},"Click or drag audio to this area to upload")))))}}]),a}(o.a.Component)),Z=Object(j.f)(K),ee=a(493),te=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(i.a)(this,a),n=t.call(this,e);var o=e.cookies;return n.state={csrftoken:o.get("csrftoken")},T.a.defaults.headers.common["X-CSRFToken"]=n.state.csrftoken,n}return Object(l.a)(a,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(j.c,null,o.a.createElement(j.a,{exact:!0,path:"/",component:F}),o.a.createElement(j.a,{path:"/dashboard",component:Z})))}}]),a}(o.a.Component),ae=Object(ee.a)(te);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ne=a(88),oe=a(494);r.a.render(o.a.createElement(ne.a,null,o.a.createElement(oe.a,null,o.a.createElement(ae,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[241,1,2]]]);
//# sourceMappingURL=main.1ee63a0c.chunk.js.map